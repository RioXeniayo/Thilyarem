
<!DOCTYPE html>
<html>
  <head>
    <base target="_top">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <style>
      body {
        padding: 1.5rem;
        background-color: #f8f9fa;
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      }
      .form-label {
        font-weight: 600;
        margin-bottom: 0.5rem;
      }
      .card {
        border-radius: 0.5rem;
        box-shadow: 0 2px 4px rgba(0,0,0,0.1);
      }
      #results {
        margin-top: 1.5rem;
        padding: 1.5rem;
        border-radius: 0.5rem;
        background-color: #fff;
        min-height: 150px;
      }
      #loading {
        display: none;
        text-align: center;
        padding: 1rem;
        color: #6c757d;
      }
      .celestial-perk-section {
        display: none;
      }
      .form-control, .form-select {
        border-radius: 0.375rem;
        transition: border-color 0.2s ease-in-out;
      }
      .form-control:focus, .form-select:focus {
        border-color: #0d6efd;
        box-shadow: 0 0 0 0.2rem rgba(13, 110, 253, 0.25);
      }
      .btn-primary, .btn-secondary {
        padding: 0.5rem 1.5rem;
        border-radius: 0.375rem;
      }
      .alert {
        margin-top: 1rem;
      }
      .tooltip-inner {
        background-color: #343a40;
        color: #fff;
      }
      @media (max-width: 768px) {
        .col-md-6 {
          margin-bottom: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h2 class="mb-4 text-center">Breeding Roller</h2>
      <div class="row g-4">
        <!-- Sire Column -->
        <div class="col-md-6">
          <div class="card p-3">
            <h4 class="mb-3">Sire</h4>
            <div class="mb-3">
              <label for="sire_breed" class="form-label">Breed</label>
              <select id="sire_breed" class="form-select" aria-label="Sire Breed">
                <option value="Thilyarem" selected>Thilyarem</option>
                <option value="Destrier">Destrier</option>
                <option value="Cyroas">Cyroas</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="sire_age" class="form-label">Age</label>
              <select id="sire_age" class="form-select" onchange="checkCelestial()" aria-label="Sire Age">
                <option value="Hatchling">Hatchling</option>
                <option value="Juvenile">Juvenile</option>
                <option value="Adolescent">Adolescent</option>
                <option value="Young Adult" selected>Young Adult</option>
                <option value="Adult">Adult</option>
                <option value="Elder">Elder</option>
                <option value="Ancient">Ancient</option>
                <option value="Celestial">Celestial</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="sire_mane" class="form-label">Mane</label>
              <select id="sire_mane" class="form-select" onchange="updatePhenotype('sire')" aria-label="Sire Mane">
                <option value="Natural" selected>Natural</option>
                <option value="Curly">Curly</option>
                <option value="Sphinx">Sphinx</option>
                <option value="Long">Long</option>
                <option value="Fiery">Fiery</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="sire_element" class="form-label">Inborn Element</label>
              <select id="sire_element" class="form-select" aria-label="Sire Element">
                <option value="Fire" selected>Fire</option>
                <option value="Water">Water</option>
                <option value="Air">Air</option>
                <option value="Earth">Earth</option>
                <option value="Metal">Metal</option>
                <option value="Wood">Wood</option>
                <option value="Ice">Ice</option>
                <option value="Lightning">Lightning</option>
                <option value="Light">Light</option>
                <option value="Shadow">Shadow</option>
                <option value="Aether">Aether</option>
                <option value="Verdant">Verdant</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="sire_geno" class="form-label">Genotype <span data-bs-toggle="tooltip" data-bs-placement="top" title="Enter alleles (e.g., B+/BA M+/M0 Bt Sp). Use / for pairs or single alleles, space-separated. Valid alleles: B+, BA, BG, BW, M+, MB, M0, K+, KB, Vm, Ja, Vl, Am, Bt, Cl, In, Mnt, Pg, Pt, Ro, Sb, Si, Stn, Ov, Apl, Brn, Dpl, Bng, Mrl, Pnd, Py, Rsc, Sp, Di, Gl, Ir, Pb, Tk, Stm, Sd, Wd, Hr, Fg, St">ℹ️</span></label>
              <input type="text" id="sire_geno" class="form-control" value="B+/BA M+/M0 K+/K+ Vm Sp" oninput="updatePhenotype('sire')" aria-label="Sire Genotype">
            </div>
            <div class="mb-3">
              <label for="sire_pheno" class="form-label">Phenotype</label>
              <input type="text" id="sire_pheno" class="form-control" readonly aria-label="Sire Phenotype">
            </div>
          </div>
        </div>

        <!-- Dam Column -->
        <div class="col-md-6">
          <div class="card p-3">
            <h4 class="mb-3">Dam</h4>
            <div class="mb-3">
              <label for="dam_breed" class="form-label">Breed</label>
              <select id="dam_breed" class="form-select" aria-label="Dam Breed">
                <option value="Thilyarem" selected>Thilyarem</option>
                <option value="Destrier">Destrier</option>
                <option value="Cyroas">Cyroas</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="dam_age" class="form-label">Age</label>
              <select id="dam_age" class="form-select" onchange="checkCelestial()" aria-label="Dam Age">
                <option value="Hatchling">Hatchling</option>
                <option value="Juvenile">Juvenile</option>
                <option value="Adolescent">Adolescent</option>
                <option value="Young Adult" selected>Young Adult</option>
                <option value="Adult">Adult</option>
                <option value="Elder">Elder</option>
                <option value="Ancient">Ancient</option>
                <option value="Celestial">Celestial</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="dam_mane" class="form-label">Mane</label>
              <select id="dam_mane" class="form-select" onchange="updatePhenotype('dam')" aria-label="Dam Mane">
                <option value="Natural" selected>Natural</option>
                <option value="Curly">Curly</option>
                <option value="Sphinx">Sphinx</option>
                <option value="Long">Long</option>
                <option value="Fiery">Fiery</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="dam_element" class="form-label">Inborn Element</label>
              <select id="dam_element" class="form-select" aria-label="Dam Element">
                <option value="Fire" selected>Fire</option>
                <option value="Water">Water</option>
                <option value="Air">Air</option>
                <option value="Earth">Earth</option>
                <option value="Metal">Metal</option>
                <option value="Wood">Wood</option>
                <option value="Ice">Ice</option>
                <option value="Lightning">Lightning</option>
                <option value="Light">Light</option>
                <option value="Shadow">Shadow</option>
                <option value="Aether">Aether</option>
                <option value="Verdant">Verdant</option>
              </select>
            </div>
            <div class="mb-3">
              <label for="dam_geno" class="form-label">Genotype <span data-bs-toggle="tooltip" data-bs-placement="top" title="Enter alleles (e.g., BA/BA MB/M0 Sp Bt). Use / for pairs or single alleles, space-separated. Valid alleles: B+, BA, BG, BW, M+, MB, M0, K+, KB, Vm, Ja, Vl, Am, Bt, Cl, In, Mnt, Pg, Pt, Ro, Sb, Si, Stn, Ov, Apl, Brn, Dpl, Bng, Mrl, Pnd, Py, Rsc, Sp, Di, Gl, Ir, Pb, Tk, Stm, Sd, Wd, Hr, Fg, St">ℹ️</span></label>
              <input type="text" id="dam_geno" class="form-control" value="BA/BA MB/MB K+/KB Sp Bt" oninput="updatePhenotype('dam')" aria-label="Dam Genotype">
            </div>
            <div class="mb-3">
              <label for="dam_pheno" class="form-label">Phenotype</label>
              <input type="text" id="dam_pheno" class="form-control" readonly aria-label="Dam Phenotype">
            </div>
          </div>
        </div>
      </div>

      <hr class="my-4">
      <h4>Items & Inbreeding</h4>
      <div class="row g-4">
        <div class="col-md-6">
          <div class="card p-3">
            <div class="form-check mb-2">
              <input class="form-check-input" type="checkbox" id="crescent_herb" aria-label="Crescent Herb">
              <label class="form-check-label" for="crescent_herb">Crescent Herb (+2 pups max)</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" id="moonlit_herb" aria-label="Moonlit Herb">
              <label class="form-check-label" for="moonlit_herb">Moonlit Herb (+mutations/traits, +2 pups max)</label>
            </div>
          </div>
        </div>
        <div class="col-md-6">
          <div class="card p-3">
            <label for="coi" class="form-label">Inbreeding Level</label>
            <select id="coi" class="form-select" aria-label="Inbreeding Level">
              <option value="None" selected>None</option>
              <option value="Slight">Slight</option>
              <option value="Medium">Medium</option>
              <option value="High">High</option>
            </select>
          </div>
        </div>
      </div>

      <!-- Celestial Perk Section -->
      <div id="celestialPerkSection" class="mt-4 celestial-perk-section">
        <hr class="my-4">
        <div class="card p-3">
          <h4 class="mb-3">Celestial Perk</h4>
          <p class="text-muted mb-2"><small>One parent is Celestial. Please choose ONE hereditary trait.</small></p>
          <select id="celestial_perk" class="form-select" aria-label="Celestial Perk">
            <option value="None" selected>None</option>
            <option value="Divine Blessing">Divine Blessing</option>
            <option value="Savage Boon">Savage Boon</option>
            <option value="Prismatic Aura">Prismatic Aura</option>
          </select>
        </div>
      </div>

      <!-- Button Row -->
      <div class="d-flex justify-content-end mt-4 gap-2">
        <button id="resetButton" class="btn btn-secondary">Reset</button>
        <button id="rollButton" class="btn btn-primary">Hatch Time!</button>
      </div>

      <hr class="my-4">
      <h4>Results</h4>
      <div id="loading">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Calculating...</span>
        </div>
        <span class="ms-2">Calculating...</span>
      </div>
      <div id="resultsWrapper" style="display: none;">
        <div id="results" class="card p-3"></div>
      </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
    <script src="breedroller.js"></script>
  </body>
</html>
